name: task-a

on: [push]

jobs:
    test:
        runs-on: "ubuntu-latest"
        name: pytest
        steps:
            - uses: actions/checkout@v4
            - name: Set up Python
              uses: actions/setup-python@v5
              with:
                  python-version: "3.11"
                  cache: "pip"
            - name: Setup virtual environment
              run: |
                  python -m venv venv
                  source venv/bin/activate
            - name: Install dependencies
              run: |
                  pip install -r ./task_a/requirements.txt
            - name: Run tests
              run: |
                  pytest ./task_a/task_a.py --html=report.html --self-contained-html
            - name: Upload test results
              uses: actions/upload-artifact@v2
              with:
                  name: test-results
                  path: ./task_a/report.html
